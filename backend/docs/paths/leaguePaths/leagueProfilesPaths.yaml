ProfileSearchForLeagueInvite:
  get:
    summary: Retrieve profiles by search criteria
    description: This endpoint allows you to search for profiles based on username, first name, and league ID, with pagination options.
    operationId: searchProfilesForLeagueInvite
    tags:
      - League
    parameters:
      - $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/parameters/profileSearchForLeagueInviteParameters/properties/userName"
      - $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/parameters/profileSearchForLeagueInviteParameters/properties/firstName"
      - $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/parameters/profileSearchForLeagueInviteParameters/properties/lastName"
      - $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/parameters/profileSearchForLeagueInviteParameters/properties/leagueId"
      - $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/parameters/profileSearchForLeagueInviteParameters/properties/page"
      - $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/parameters/profileSearchForLeagueInviteParameters/properties/limit"
      - $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/parameters/profileSearchForLeagueInviteParameters/properties/sortBy"
      - $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/parameters/profileSearchForLeagueInviteParameters/properties/isAsc"
      - $ref: "../../components/securityComponents.yaml#/components/parameters/ProfileId"
    responses:
      "200":
        description: A list of profiles matching the search criteria. Found results will be true whenever the search returns results, otherwise it will be false and the searchResults object will be null
        content:
          application/json:
            schema:
              $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/schemas/ProfileSearchForLeagueInviteResponseSuccess"
            examples:
              ProfilesFound:
                value:
                  results:
                    searchResults:
                      - profileId: "e23223e4-6d61-4875-9750-b842b82e4933"
                        userName: "blackpanther"
                        firstName: "TChalla"
                        lastName: "Wakanda"
                        imageUrl: "/assets/images/profileImages/blackpanther.jpeg"
                        inviteStatus: null
                      - profileId: "c43223e4-6d61-4875-9750-b842b82e4934"
                        userName: "ironman"
                        firstName: "Tony"
                        lastName: "Stark"
                        imageUrl: "/assets/images/profileImages/ironman.jpeg"
                        inviteStatus: null
                    pagination:
                      currentPage: 1
                      totalPages: 3
                      totalCount: 8
                  message: "Found matching profiles"
                  foundResults: true
              NoProfilesFound:
                summary: No results found with search
                value:
                  results: null
                  message: "No results found"
                  foundResults: false

      "400":
        description: Bad request, invalid parameters or missing security credentials.
        content:
          application/json:
            schema:
              $ref: "../../components/errorComponents.yaml#/components/schemas/BadRequestError"
            examples:
              MissingSearchCriteria:
                summary: missing search criteria - UserName, First Name or LastName is required
                value:
                  statusCode: 400
                  error: "Bad Request"
                  message: "UserName, First Name or LastName is required"
              MissingProfileId:
                summary: Missing profile Id parameters
                value:
                  statusCode: 400
                  error: "Bad Request"
                  message: "League ID is required"

      "401":
        description: Unauthorized Error
        content:
          application/json:
            schema:
              $ref: "../../components/errorComponents.yaml#/components/schemas/UnauthorizedError"
            examples:
              UnauthorizedError:
                $ref: "../../components/errorComponents.yaml#/components/examples/UnauthorizedError"
              ProfileNotInLeagueError:
                summary: Error message indicating the profile id is not in the league and cannot perform the league operation
                value:
                  statusCode: 401
                  error: "Unauthorized"
                  message: "Profile does not belong to league"

      "500":
        $ref: "../../components/errorComponents.yaml#/components/responses/InternalServerError"
    security:
      - accessTokenCookie: []
      - refreshTokenCookie: []

LeagueInvite:
  get:
    summary: Retrieve league invites for a profile
    description: This endpoint allows you to retrieve league invites for a profile. The profile must have a valid token and profileId query parameters.
    operationId: getLeagueInvites
    tags:
      - League
    parameters:
      - $ref: "../../components/securityComponents.yaml#/components/parameters/ProfileId"
    responses:
      "200":
        description: A list of league invites for the profile
        content:
          application/json:
            schema:
              type: object
              properties:
                leagueInvites:
                  type: array
                  items:
                    $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/schemas/GetLeagueInvitesSuccessResponse"
  post:
    summary: Invite a profile to a league
    tags:
      - League
    operationId: inviteToLeague
    description: This endpoint allows the inviter to send an invitation to a profile to join a league. The inviter must be a member of the league and have a valid token.
    parameters:
      - $ref: "../../components/securityComponents.yaml#/components/parameters/ProfileId"
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../../components/leagueComponents/leagueProfileComponents.yaml#/components/schemas/InviteMemberToLeagueRequest"
          examples:
            request:
              summary: Example request for inviting a profile to a league
              value:
                inviterProfileId: "inviterProfileId"
                inviteeProfileId: "inviteeProfileId"
                leagueId: "leagueId"
    responses:
      "200":
        description: Invitation created successfully
        content:
          application/json:
            schema:
              $ref: "../../components/leagueComponents/leagueComponents.yaml#/InviteMemberToLeagueSuccessResponse"
            examples:
              success:
                summary: Invitation sent successfully
                value:
                  message: "Invited member to league successfully"
      "400":
        description: Bad request - missing a required field or invalid profile or league IDs
        content:
          application/json:
            schema:
              $ref: "../../components/errorComponents.yaml#/components/schemas/BadRequestError"
            examples:
              MissingInviterProfileId:
                summary: Missing inviterProfileId
                value:
                  statusCode: 400
                  error: "Bad Request"
                  message: "Missing inviterProfileId in request"
              MissingInviteeProfileId:
                summary: Missing inviteeProfileId
                value:
                  statusCode: 400
                  error: "Bad Request"
                  message: "Missing inviteeProfileId in request"
              MissingLeagueId:
                summary: Missing leagueId
                value:
                  statusCode: 400
                  error: "Bad Request"
                  message: "Missing leagueId in request"
      "409":
        description: "InviteeProfileId is already in league"
        content:
          application/json:
            schema:
              $ref: "../../components/errorComponents.yaml#/components/schemas/ConflictError"
            examples:
              AlreadyInLeague:
                summary: Message indicating the invitee profile is already in league
                value:
                  statusCode: 409
                  error: "Conflict"
                  message: "Profile is already invited to league"
              AlreadyInvitedToLeague:
                summary: Message indicating the invitee profile is already invited to league.
                value:
                  statusCode: 409
                  error: "Conflict"
                  message: "Profile is already in league"
      "401":
        description: Unauthorized Error
        content:
          application/json:
            schema:
              $ref: "../../components/errorComponents.yaml#/components/schemas/UnauthorizedError"
            examples:
              UnauthorizedError:
                $ref: "../../components/errorComponents.yaml#/components/examples/UnauthorizedError"
              ProfileNotInLeagueError:
                summary: Error message indicating the profile id is not in the league and cannot perform the league operation
                value:
                  statusCode: 401
                  error: "Unauthorized"
                  message: "Profile does not belong to league"
      "500":
        $ref: "../../components/errorComponents.yaml#/components/responses/InternalServerError"

    security:
      - refreshTokenCookie: []
      - AccessTokenCookie: []
